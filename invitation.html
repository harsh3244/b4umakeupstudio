<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Invitation — B4U Makeup Studio</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom styles for the invitation card */
    body {
      font-family: 'Times New Roman', Times, serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: linear-gradient(180deg, #fff6f9 0%, #ffffff 100%);
      margin: 0;
    }
    main {
      flex-grow: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    .card-wrapper {
      width: 100%;
      max-width: 900px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    h1 {
      margin: 0 0 1rem 0;
      font-size: 2.5rem; /* Increased size */
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      color: #333;
    }
    input[type=text] {
      width: 100%;
      max-width: 350px;
      padding: 12px 14px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
      font-size: 1rem;
      margin-bottom: 1rem;
    }
    button {
      width: 100%;
      max-width: 350px;
      padding: 12px 0;
      border-radius: 10px;
      border: 0;
      background: linear-gradient(90deg, #ec4899, #f472b6);
      color: white;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      transition: opacity 0.2s;
    }
    button:hover {
      opacity: 0.9;
    }
    canvas {
      border-radius: 8px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      background: white;
      width: 100%;
      max-width: 420px;
      height: auto;
    }
    @media (min-width: 768px) {
      .card-wrapper {
        flex-direction: row;
        align-items: center;
      }
      .controls {
        flex: 1;
      }
      .canvas-container {
        flex: 1;
        display: flex;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <main>
    <div class="card-wrapper">
      <div class="controls">
        <h1>Get Your Personal Invitation!</h1>
        <p class="mb-4 text-gray-600">Enter your name below to generate a custom invitation for our grand opening.</p>
        <input id="nameInput" type="text" placeholder="Enter your full name..." />
        <button id="downloadBtn">Download Invitation</button>
      </div>

      <div class="canvas-container">
        <canvas id="inviteCanvas"></canvas>
      </div>
    </div>
  </main>

  <footer class="w-full text-center text-sm text-gray-600 p-6">
    <p class="font-semibold">© 2025 B4U Makeup Studio</p>
    <p class="mt-2">
      <a href="https://www.instagram.com/b4u_makeup_studio_komal/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-pink-500 font-medium gap-2 hover:text-pink-700">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
          <rect x="2" y="2" width="20" height="20" rx="5" />
          <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" />
          <line x1="17.5" y1="6.5" x2="17.51" y2="6.5" stroke-linecap="round"/>
        </svg>
        Follow us on Instagram
      </a>
    </p>
    <p class="mt-2 text-xs">
      <a href="rights.html" class="text-gray-500 hover:text-pink-600">All Rights Reserved</a>
    </p>
  </footer>

  <script>
    const canvas = document.getElementById('inviteCanvas');
    const ctx = canvas.getContext('2d');
    const nameInput = document.getElementById('nameInput');
    const downloadBtn = document.getElementById('downloadBtn');

    const width = 498, height = 700;
    const scale = window.devicePixelRatio || 1; // For high-res screens
    canvas.width = width * scale;
    canvas.height = height * scale;
    canvas.style.width = `${width}px`;
    canvas.style.height = `${height}px`;
    ctx.scale(scale, scale);

    const bg = new Image();
    bg.src = "invitation_bg.png"; // Make sure you have a background image with this name
    bg.onload = renderCanvas;
    // If background fails to load, draw a fallback
    bg.onerror = () => {
        console.error("Background image not found!");
        ctx.fillStyle = '#fff6f9';
        ctx.fillRect(0, 0, width, height);
        renderCanvas();
    };


    function renderCanvas() {
      // Clear and draw background
      ctx.clearRect(0, 0, width, height);
      if(bg.complete && bg.naturalWidth !== 0) {
        ctx.drawImage(bg, 0, 0, width, height);
      } else {
        // Fallback gradient if image is missing
        const gradient = ctx.createLinearGradient(0, 0, 0, height);
        gradient.addColorStop(0, '#fde2e4');
        gradient.addColorStop(1, '#fad2e1');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, width, height);
      }
      
      const name = nameInput.value.trim() || "Your Name Here";

      ctx.save();
      ctx.textAlign = "center";

      // "Dear" text
      ctx.font = "36px 'Great Vibes', cursive";
      ctx.fillStyle = "#555";
      ctx.fillText(`Dear ${name},`, width / 2, 280);
      
      // Invitation text
      ctx.font = "18px 'Times New Roman', serif";
      ctx.fillStyle = "#444";
      ctx.fillText("We cordially invite you to celebrate the", width / 2, 330);
      
      // Main event
      ctx.font = "28px 'Playfair Display', serif";
      ctx.fillStyle = "#333";
      ctx.fillText("Grand Opening", width / 2, 370);
      
      ctx.font = "18px 'Times New Roman', serif";
      ctx.fillText("of", width / 2, 400);

      // Studio Name
      ctx.font = "40px 'Playfair Display', serif";
      ctx.fillStyle = "#c13b6c";
      ctx.fillText("B4U Makeup Studio", width / 2, 440);

      ctx.restore();
    }

    nameInput.addEventListener("input", renderCanvas);

    downloadBtn.addEventListener("click", () => {
      // Temporarily use a higher quality name for download
      const currentName = nameInput.value;
      if (nameInput.value.trim() === "") {
          nameInput.value = "Guest";
      }
      renderCanvas(); // Re-render before download
      
      const link = document.createElement("a");
      link.download = `B4U_Invitation_for_${nameInput.value.trim()}.png`;
      link.href = canvas.toDataURL("image/png", 1.0);
      link.click();

      // Restore placeholder if it was empty
      nameInput.value = currentName;
      if (currentName.trim() === "") {
        renderCanvas(); // Re-render with placeholder
      }
    });
  </script>
</body>
</html>
